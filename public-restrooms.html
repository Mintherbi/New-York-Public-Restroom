<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Public Restrooms - Interactive Map</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- Token Input Modal -->
    <div id="tokenModal" class="modal">
        <div class="modal-content">
            <h2>ğŸ—ï¸ Mapbox Access Token Required</h2>
            <p>To use this interactive map, please enter your Mapbox access token:</p>
            <div class="token-input-group">
                <input type="text" id="mapboxToken" placeholder="Enter your Mapbox access token here..." />
                <button id="submitToken">Start Map</button>
            </div>
            <div class="token-help">
                <p><strong>How to get a Mapbox token:</strong></p>
                <ol>
                    <li>Visit <a href="https://account.mapbox.com/" target="_blank">account.mapbox.com</a></li>
                    <li>Sign up for a free account</li>
                    <li>Go to "Access tokens" section</li>
                    <li>Copy your default public token</li>
                </ol>
                <p><small>Your token will be stored locally for future visits.</small></p>
            </div>
        </div>
    </div>

    <main>
        <div class="project-title">NYC Public Restrooms Finder</div>
        <div class="project-subtitle">Interactive Map & Real-time Status</div>

        <div class="section-title">Digital Object: Public Facilities Mapping</div>
        <p>This interactive map displays all public restrooms across New York City, including parks, libraries, and other public facilities. Find nearby restrooms with detailed information about accessibility, operating hours, and current status. Perfect for tourists, residents, and anyone exploring the city!</p>

        <!-- Main Map Section -->
        <div class="section-title">ğŸš» NYC Public Restrooms Interactive Map</div>
        <p>Explore over 1,000 public restroom locations throughout NYC. Click on any marker to see detailed information including accessibility features, operating hours, changing stations, and current operational status. Use the filters below to find exactly what you need!</p>
        
        <div id="mapbox-container-restrooms"></div>
        
        <!-- Enhanced Controls Section -->
        <div class="controls">
            <div class="filter-group">
                <label for="searchFacility">ğŸ” Search Facilities:</label>
                <input type="text" id="searchFacility" placeholder="Search by facility name or location...">
            </div>
            
            <div class="filter-group">
                <label for="statusFilter">ğŸ“Š Status Filter:</label>
                <select id="statusFilter">
                    <option value="all">All Facilities</option>
                    <option value="Operational">âœ… Operational Only</option>
                    <option value="Not Operational">âŒ Not Operational</option>
                    <option value="Closed for Construction">ğŸš§ Under Construction</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="accessibilityFilter">â™¿ Accessibility:</label>
                <select id="accessibilityFilter">
                    <option value="all">All Facilities</option>
                    <option value="Fully Accessible">â™¿ Fully Accessible</option>
                    <option value="Partially Accessible">ğŸšª Partially Accessible</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="locationTypeFilter">ğŸ¢ Location Type:</label>
                <select id="locationTypeFilter">
                    <option value="all">All Types</option>
                    <option value="Park">ğŸŒ³ Parks</option>
                    <option value="Library">ğŸ“š Libraries</option>
                    <option value="Other">ğŸ›ï¸ Other Facilities</option>
                </select>
            </div>
            
            <div class="button-group">
                <button id="resetAllFilters">ğŸ”„ Reset All Filters</button>
                <button id="fitToRestrooms">ğŸ—ºï¸ Fit to All Data</button>
                <button id="findNearMe">ğŸ“ Find Near Me</button>
            </div>
        </div>

        <!-- Statistics Panel -->
        <div class="stats-panel">
            <h3>ğŸ“ˆ Current Map Statistics</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number" id="totalVisible">0</span>
                    <span class="stat-label">Visible Facilities</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="operationalCount">0</span>
                    <span class="stat-label">Operational</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="accessibleCount">0</span>
                    <span class="stat-label">Fully Accessible</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="parkCount">0</span>
                    <span class="stat-label">Park Facilities</span>
                </div>
            </div>
        </div>

        <!-- Info Panel -->
        <div class="info-panel">
            <h3>â„¹ï¸ How to Use This Map</h3>
            <ul>
                <li><strong>ğŸ–±ï¸ Click</strong> any marker to see detailed facility information</li>
                <li><strong>ğŸ” Search</strong> for specific facilities or neighborhoods</li>
                <li><strong>ğŸ”½ Filter</strong> by status, accessibility, or location type</li>
                <li><strong>ğŸ“ "Find Near Me"</strong> to locate facilities around your current position</li>
                <li><strong>âŒ¨ï¸ Keyboard Shortcuts:</strong> F = Fit to data, R = Reset filters, Escape = Clear search</li>
            </ul>
        </div>

    </main>
    
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <script src="restroom-map.js"></script>
</body>
</html>
